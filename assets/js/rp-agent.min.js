!function(a){"use strict";a(document).on("click","#menu-item-login",function(e){new Custombox.modal({content:{target:"#rp-box-login",effect:"flip",width:800,overlayOpacity:.8,position:["center","top"]}}).open(),e.preventDefault()}),a(document).on("click","#menu-item-register ",function(e){new Custombox.modal({content:{target:"#rp-box-register ",effect:"flip",width:800,overlayOpacity:.8,position:["center","top"]}}).open(),e.preventDefault()}),a(document).ready(function(){a(document).on("click",".rp-form-register .rp-button",function(e){e.preventDefault();var s=a(this),t=s.closest(".rp-form-register").serializeArray();t.push({name:"action",value:"rp_register_member"},{name:"security",value:RP_Agent.security}),a.ajax({url:RP_Agent.ajax_url,type:"POST",dataType:"json",data:t,beforeSend:function(){s.find(">i").removeClass("hide"),s.closest(".rp-register-member-action").find(".notice").html("").hide()},success:function(e){try{s.find(">i").addClass("hide");var t=e.status;s.closest(".rp-register-member-action").find(".notice").html(e.msg).show().addClass(t),"success"===t?(a.notifyBar({cssClass:"success",html:e.message,position:"bottom"}),setTimeout(function(){window.location.href=e.url_redirect},3e3)):a.notifyBar({cssClass:"error",html:e.message,position:"bottom"})}catch(e){a.notifyBar({cssClass:"error",html:e,position:"bottom"})}}})}),a(document).on("click",".rp-form-login .rp-button",function(e){e.preventDefault();var t=a(this),s=t.closest(".rp-form-login").serializeArray();s.push({name:"action",value:"rp_login_member"},{name:"security",value:RP_Agent.security}),a.ajax({url:RP_Agent.ajax_url,type:"POST",dataType:"json",data:s,beforeSend:function(){t.find(">i").removeClass("hide"),t.find(".rp-item-wrap").removeClass("validate-error").find(".notice").hide(),t.closest(".rp-login-member-action").find(".notice").html("").hide()},success:function(e){try{t.find(">i").addClass("hide"),"success"===e.status?(a.notifyBar({cssClass:"success",html:e.message,position:"bottom"}),setTimeout(function(){window.location.href=e.url_redirect},3e3)):a.notifyBar({cssClass:"error",html:e.message,position:"bottom"})}catch(e){a.notifyBar({cssClass:"error",html:e,position:"bottom"})}}})})}),jQuery(document).ready(function(n){0<n(".rp-box-contact-agent").length&&n(".rp-box-contact-agent").each(function(){var a=n(this);a.on("click",".rp-submit",function(e){e.preventDefault();var t=a.serializeArray(),s=n(this);t.push({name:"action",value:"rp_contact_agent"},{name:"security",value:RP_Agent.security}),n.ajax({url:RP_Agent.ajax_url,type:"POST",dataType:"json",data:t,beforeSend:function(){s.find(">i").removeClass("hide")},success:function(e){s.find(">i").addClass("hide"),n.notifyBar({cssClass:e.status,html:e.message,position:"bottom"})}})})}),n("body").on("click",".more-action .rp-event",function(e){e.preventDefault();var t=n(this),s=t.data("process"),a=(t.data("user"),t.data("id"));"remove"===s?(n.ajax({url:RP_Agent.ajax_url,type:"POST",dataType:"json",data:{action:"rp_agent_dashboard",security:RP_Agent.security,type:"remove",property_id:a},beforeSend:function(){t.addClass("loadmore")},success:function(e){try{t.removeClass("loadmore"),t.closest(".property-item").remove(),t.closest(".property-item-dashboard").remove(),n.notifyBar({cssClass:e.status,html:e.message,position:"bottom"})}catch(e){n.notifyBar({cssClass:"error",html:e,position:"bottom"})}}}),confirm("Are you sure you want to delete Property ? Note, this operation can not be undone.")):"sold"===s?n.ajax({url:RP_Agent.ajax_url,type:"POST",dataType:"json",data:{action:"rp_agent_dashboard",security:RP_Agent.security,type:"sold",property_id:a},beforeSend:function(){t.addClass("loadmore")},success:function(){try{t.hasClass("unavailable")?(t.removeClass("unavailable"),t.closest(".property-item").find(".rp-thumbnail").removeClass("unavailable")):(t.addClass("unavailable"),t.closest(".property-item").find(".rp-thumbnail").addClass("unavailable")),t.removeClass("loadmore")}catch(e){n.notifyBar({cssClass:"error",html:e,position:"bottom"})}}}):"featured"===s&&n.ajax({url:RP_Agent.ajax_url,type:"POST",dataType:"json",data:{action:"rp_agent_dashboard",security:RP_Agent.security,type:"featured",property_id:a},beforeSend:function(){if(t.hasClass("not-set-feauted"))return n.notifyBar({cssClass:"error",html:"The number of added featured properties exceeded the limit. Please upgrade a new package.!",position:"bottom"}),!1;t.addClass("loadmore")},success:function(e){try{if("error"===e.status)return t.addClass("not-set-feauted"),!1;t.hasClass("is-featured")?(t.removeClass("is-featured rp-icon-ion-ios-star"),t.addClass("rp-icon-ion-ios-star-outline")):(t.removeClass("rp-icon-ion-ios-star-outline"),t.addClass("is-featured rp-icon-ion-ios-star")),t.removeClass("loadmore"),n.notifyBar({cssClass:e.status,html:e.message,position:"bottom"})}catch(e){n.notifyBar({cssClass:"error",html:e,position:"bottom"})}}})}),0<n(".rp-user-profile").length&&n(".rp-user-profile").on("click","button.rp-button",function(e){e.preventDefault();var t=n(this),s=t.closest("form").serializeArray();s.push({name:"action",value:"rp_user_profile"},{name:"security",value:RP_Agent.security}),n.ajax({url:RP_Agent.ajax_url,type:"POST",dataType:"json",data:s,beforeSend:function(){t.find("i").removeClass("hide")},success:function(e){t.find("i").addClass("success").removeClass("rp-icon-spin"),setTimeout(function(){t.find("i").addClass("hide rp-icon-spin").removeClass("success")},3e3),t.closest("form").find(".rp-notice").html(e.msg).addClass(e.status).show(),"error"===e.status&&void 0!==e.class&&""!==e.class&&n("#"+e.class).closest(".rp-item-wrap").addClass("validate-error"),setTimeout(function(){t.closest("form").focus()},1)}})}),0<n(".rp-agent-profile").length&&n(".rp-agent-profile").on("click","button.rp-button",function(e){e.preventDefault();var t=n(this),s=t.closest("form").serializeArray();s.push({name:"action",value:"rp_agent_profile"},{name:"security",value:RP_Agent.security}),n.ajax({url:RP_Agent.ajax_url,type:"POST",dataType:"json",data:s,beforeSend:function(){t.find("i").removeClass("hide")},success:function(e){t.find("i").addClass("success").removeClass("rp-icon-spin"),setTimeout(function(){t.find("i").addClass("hide rp-icon-spin").removeClass("success")},3e3),n.notifyBar({cssClass:e.status,html:e.msg,position:"bottom"}),setTimeout(function(){t.closest("form").focus()},1)}})});0<n(".loadmore-property-agent").length&&n(document).on("click",".loadmore-property-agent",function(e){e.preventDefault();var t=n(this),s=t.data("agent-id"),a=t.data("page-current"),o=t.data("max-page"),r=t.data("posts-per-page");n.ajax({url:RP_Agent.ajax_url,type:"POST",dataType:"json",data:{action:"load_more_property_agent",security:RP_Agent.security,agent_id:s,page_current:a,max_page:o,posts_per_page:r},beforeSend:function(){},success:function(e){try{"success"==e.status?(t.closest(".rp-property-agent").find("ul").append(e.html),t.data("page-current",a+1)):"end"==e.status?(n.notifyBar({cssClass:"success",html:"Complete",position:"bottom"}),t.hide()):n.notifyBar({cssClass:"error",html:e.message,position:"bottom"})}catch(e){n.notifyBar({cssClass:"error",html:e,position:"bottom"})}}})})})}(jQuery);